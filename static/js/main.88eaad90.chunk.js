(this["webpackJsonpticket-task"]=this["webpackJsonpticket-task"]||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/avia-logo.0c089234.svg"},46:function(e,t,a){e.exports=a(56)},51:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c),o=(a(51),a(20)),s=a.n(o),l=a(28),u=a(11),m=a(10),f=a(90),d=a(84),p=a(35),b=a.n(p),g=a(40),h=a(89),v=a(4),E=a(91),x=a(92),y=a(88),k=a(94),j=a(83),O=a(58),w=Object(v.a)((function(e){return{root:{margin:e.spacing(2,0),padding:"20px"}}}))(j.a);function F(e,t){var a=Number(new Date(e))+60*t*1e3;return S(new Date(a))}function S(e){return new Date(e).toLocaleString("ru",{hour:"2-digit",minute:"2-digit"})}var C=function(e){var t=e.ticketInfo;return r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(w,{elevation:3},r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{style:{display:"flex",alignItems:"center"},item:!0,xs:4},r.a.createElement(O.a,{color:"primary",variant:"h4"},t.price," \u0420")),r.a.createElement(d.a,{item:!0,xs:4}),r.a.createElement(d.a,{style:{display:"flex"},item:!0,xs:4},r.a.createElement("img",{style:{width:"auto",height:"36px"},alt:"",src:"http://pics.avs.io/99/36/".concat(t.carrier,".png")}))),r.a.createElement(d.a,{style:{marginTop:"20px"},container:!0},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(d.a,{item:!0,style:{marginBottom:"10px"}},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},t.segments[0].origin," - ",t.segments[0].destination),r.a.createElement(O.a,{variant:"subtitle1"},S(t.segments[0].date)," - ",F(t.segments[0].date,t.segments[0].duration))),r.a.createElement(d.a,{item:!0},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},t.segments[1].origin," - ",t.segments[1].destination),r.a.createElement(O.a,{variant:"subtitle1"},S(t.segments[1].date)," - ",F(t.segments[1].date,t.segments[0].duration)))),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(d.a,{item:!0,style:{marginBottom:"10px"}},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement(O.a,{variant:"subtitle1"},Math.floor(t.segments[0].duration/60),"\u0447 ",t.segments[0].duration%60,"\u043c")),r.a.createElement(d.a,{item:!0},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement(O.a,{variant:"subtitle1"},Math.floor(t.segments[1].duration/60),"\u0447 ",t.segments[1].duration%60,"\u043c"))),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(d.a,{item:!0,style:{marginBottom:"10px"}},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},"\u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418:"),r.a.createElement(O.a,{variant:"subtitle1"},0===t.segments[0].stops.length?"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":t.segments[0].stops.map((function(e,t,a){return a.length-1!==t?e+", ":e})))),r.a.createElement(d.a,{item:!0},r.a.createElement(O.a,{color:"secondary",variant:"subtitle2"},"\u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418:"),r.a.createElement(O.a,{variant:"subtitle1"},0===t.segments[1].stops.length?"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":t.segments[1].stops.map((function(e,t,a){return a.length-1!==t?e+", ":e}))))))))},B=[{title:"\u0412\u0441\u0435",value:"all",checked:!0},{title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",value:0,checked:!1},{title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:1,checked:!1},{title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",value:2,checked:!1},{title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",value:3,checked:!1}],I=a(85),W=a(86),D=a(87),P=a(93),z=Object(I.a)({root:{padding:"10px","&&:hover":{backgroundColor:"transparent"}}}),M=Object(I.a)({root:{width:"100%",margin:0,paddingLeft:"10px",transition:"all 0.3s","&&:hover":{backgroundColor:"#F1FCFF"},"&:last-child":{borderRadius:"0 0 5px 5px"}}});var N=function(e){var t=e.checkboxFilters,a=e.onChangeHandlerFilters,n=z(),c=M();return r.a.createElement(j.a,{elevation:3},r.a.createElement(O.a,{variant:"subtitle2",style:{padding:"20px 0 0 20px"}},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement(W.a,{row:!0},t.map((function(e,t){return r.a.createElement(D.a,{className:c.root,key:t,control:r.a.createElement(P.a,{className:n.root,checked:e.checked,onChange:function(){return a(t)},color:"primary"}),label:e.title})}))))},R=Object(g.a)({palette:{primary:{main:"#2196F3"},secondary:{main:"#A0B0B9"}},typography:{h4:{fontSize:"24px",fontWeight:500},subtitle1:{fontSize:"14px",fontWeight:"bold"},subtitle2:{fontSize:"12px",fontWeight:"bold"}}}),T=Object(v.a)((function(){return{root:{display:"flex"}}}))(k.a),H=Object(v.a)((function(e){return{root:{padding:"15px 0",flexGrow:"1",color:e.palette.text.primary,backgroundColor:"#fff","&&:hover":{backgroundColor:"#F1FCFF"}},selected:{backgroundColor:"#2196F3 !important",color:"#fff !important"}}}))(y.a);var J=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),p=o[0],g=o[1],v=Object(n.useState)([]),y=Object(m.a)(v,2),k=y[0],j=y[1],O=Object(n.useState)(!1),w=Object(m.a)(O,2),F=w[0],S=w[1],I=Object(n.useState)(!1),W=Object(m.a)(I,2),D=W[0],P=W[1],z=Object(n.useState)(1),M=Object(m.a)(z,2),J=M[0],L=M[1],A=Object(n.useState)("byPrice"),G=Object(m.a)(A,2),$=G[0],q=G[1],K=Object(n.useState)(B),Q=Object(m.a)(K,2),U=Q[0],V=Q[1],X=Object(n.useRef)($),Y=Object(n.useRef)(U),Z=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"byPrice";return"byPrice"===a&&(t=Object(u.a)(e.sort((function(e,t){return e.price-t.price})))),"byDuration"===a&&(t=Object(u.a)(e.sort((function(e,t){return e.segments[0].duration-t.segments[0].duration})))),t},_=function(e,t){var a=t.filter((function(e){return e.checked}));return e.filter((function(e){var t=!1;return a.forEach((function(a){("all"===a.value||e.segments[0].stops.length===a.value)&&(t=!0)})),t}))};return Object(n.useEffect)((function(){X.current=$;var e=Z(p,$);g(e),j(e.slice(0,5))}),[$]),Object(n.useEffect)((function(){Y.current=U;var e=_(a,U),t=Z(e,$);g(t),j(t.slice(0,5))}),[U,a,$]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,fetch("https://front-test.beta.aviasales.ru/search");case 3:if(200!==(a=e.sent).status){e.next=9;break}return e.next=7,a.json();case 7:t(e.sent.searchId);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(e){var t=[];!function(){var a=Object(l.a)(s.a.mark((function a(){var r,i,o,l;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:if(200!==(r=a.sent).status){a.next=11;break}return a.next=6,r.json();case 6:i=a.sent,t=[].concat(Object(u.a)(t),Object(u.a)(i.tickets)),i.stop?(c(t),o=Z(t,X.current),l=_(o,Y.current),g(l),j(l.slice(0,5)),S(!1)):n(e),a.next=12;break;case 11:n(e);case 12:case"end":return a.stop()}}),a)})));function n(){return a.apply(this,arguments)}return n}()()}F||0!==a.length||function(){e.apply(this,arguments)}()}),[a,F]),r.a.createElement(h.a,{theme:R},r.a.createElement(f.a,{maxWidth:"md"},r.a.createElement(d.a,{container:!0,justify:"center"},r.a.createElement("img",{src:b.a,alt:""})),r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:3},r.a.createElement(N,{checkboxFilters:U,onChangeHandlerFilters:function(e){var t=Object(u.a)(U);"all"!==U[e].value?(t[0].checked=!1,t[e].checked=!t[e].checked,0===t.filter((function(e){return e.checked})).length&&(t[0].checked=!0)):t=t.map((function(e){return"all"===e.value?(e.checked=!0,e):(e.checked=!1,e)})),V(t)}})),r.a.createElement(d.a,{item:!0,xs:7},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(T,{value:$,exclusive:!0,"aria-label":"sorted field",onChange:function(e,t){t&&q(t)}},r.a.createElement(H,{value:"byPrice"},"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"),r.a.createElement(H,{value:"byDuration"},"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"))),F?r.a.createElement(d.a,{container:!0,justify:"center",style:{marginTop:"50px"}},r.a.createElement(E.a,{color:"primary"})):r.a.createElement(r.a.Fragment,null,k.map((function(e,t){return r.a.createElement(C,{key:t,ticketInfo:e})})),r.a.createElement(d.a,{container:!0,justify:"center",style:{marginBottom:"20px"}},r.a.createElement(x.a,{variant:"contained",color:"primary",startIcon:D&&r.a.createElement(E.a,{style:{width:"25px",height:"25px"},color:"white"}),onClick:function(){P(!0),setTimeout((function(){var e=[].concat(Object(u.a)(k),Object(u.a)(p.slice(5*J,5*J+5)));j(e),P(!1),L(J+1)}),2e3)},disabled:D},D?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451")))))))};var L=function(){return r.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.88eaad90.chunk.js.map